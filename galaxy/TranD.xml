<tool id="transcript_distance" name="TranD" version="@WRAPPER_VERSION@">
  <description></description> 
  <macros>
    <import>macros.xml</import>
  </macros>
  <expand macro="requirements" />
  <command detect_errors="exit_code"><![CDATA[
## Begin TranD Command Line
  mkdir outputs;
  cd outputs;
  trand
      $gtf1Dataset
      #if $consolidate
        --consolidate 
        --consolPrefix 
      #end if
      #if $complexityOnly
        --complexityOnly
      #end if
      --ea=$eaMode
      #if $keepIR
        --keepir
      #end if
      #if $skipPlots     
        --skip-plots 
      #end if
      #if $skipInterm
        --skip-intermediate
      #end if
      --force

  ]]></command>
  <inputs>
        <param name="gtf1Dataset" type="data" format="gtf" label="Select GTF file containing transcriptomes of interest from your history" help="File must contain “exon” features with transcript_id and gene_id values indicated in attributes"/>
        <param name="consolidate" type="boolean" display="radio" label="Select 'Yes' to consolidate transcripts" help="Consolidating transcripts remove 5'/3' transcript end variation in redundantly spliced transcripts) with identical junctions prior to complexity calculations, events and summary plotting"/>
        <param name="consolPrefix" type="text" value="tr" label="Specify the prefix to use for consolidated transcript_id values. Prefix must be alphanumeric with no spaces. An underscore is the only allowed special character"/> 
        <param name="complexityOnly" type="boolean" label="Select to output only complexity calculations" help="Select this parameter if you only want complexity measures as opposed to outputting performance of all analyses (ie event analysis, etc)"/>
        <param name="eaMode" size="30" type="select" value="" display="radio" label="Choose type of comparison to do within gene transcript" help="Compare pairs of transcripts within a gene (Pairwise) or compare all transcripts within a gene (Gene)">
          <option value="pairwise" selected="true">Pairwise</option>
          <option value="gene" selected="true">Gene</option>
        </param>
        <param name="keepIR" type="boolean" label="Set to 'Yes' if you want to keep transcripts with Intron Retention regions when generating transcript events"/>
        <param name="skipPlots" type="boolean" label="Skip generation of all plots" help="If 'Yes', TranD will not produce any plots"/>
        <param name="skipInterm" type="boolean" label="Skip output of intermediate files" help="If 'Yes', the TranD program will not output intermediate files (such as junction and exon region/fragment files)."/>
  </inputs>
  <outputs>
    <!-- The discover datasets parameter is needed to dynamically collect the output datasets --> 
    <data format= "csv" name="counts" label="${tool.name} on ${on_string}: Complexity Counts" >
      <discover_datasets pattern="(?P&lt;name&gt;.*)\.csv" ext="csv" directory="outputs" visible="true" />
    </data>
    <data format= "png" name="boxplots" label="${tool.name} on ${on_string}: Complexity Plots" >
      <discover_datasets pattern="(?P&lt;name&gt;.*)\.png" ext="png" directory="outputs" visible="true" />
    </data>
    <data format= "txt" name="figureLegend" label="${tool.name} on ${on_string}: Complexity Legend" >
      <discover_datasets pattern="(?P&lt;name&gt;.*)\.rtf" ext="rtf" directory="outputs" visible="true" />
    </data>
  </outputs>
  <tests>
  </tests>
  <help><![CDATA[

**Tool Description*

  ]]>
  </help>
  <citations>
  </citations>
</tool>
